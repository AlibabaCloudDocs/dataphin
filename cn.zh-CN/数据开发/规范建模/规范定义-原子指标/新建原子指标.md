---
keyword: [原子指标, 衍生原子指标]
---

# 新建原子指标

原子指标是对指标统计口径、具体算法的抽象。Dataphin创新性地提出了设计即开发的理念，指标定义同时也明确了设计统计口径（即计算逻辑），提升了研发效率，并保证了统计结果的一致性。

Dataphin根据计算逻辑的差异性，支持创建原子指标和衍生原子指标。详细说明如下：

-   原子指标是原生原子指标。例如，支付金额。
-   衍生原子指标是基于已提交原子指标，设定计算逻辑而构成的指标。例如，一个已提交的原子指标为支付金额，另一个已提交的原子指标为支付人数，您可以通过新建衍生原子指标的方式统计人均支付金额。

新建原子指标的权限限制，详情请参见[数据开发权限列表](/cn.zh-CN/权限管理/数据开发权限列表.md)

## 新建原子指标

1.  登录[Dataphin控制台](https://dataphin.console.aliyun.com/workingArea)。

2.  在Dataphin控制台页面，选择工作区地域后，单击**进入Dataphin\>\>**。

    您可以通过以下方式，快速进入工作区：

    -   选择工作区地域后，单击**快速开始相关工作**区域中相应的功能模块。
    -   选择工作区地域后，单击**快速进入研发项目**后的**Dev**、**Prod**或**Basic**页签，选择相应的项目。
3.  进入**维度**页面。

    1.  在Dataphin首页，单击顶部菜单栏中的**研发**。

    2.  在数据**开发**页面，单击项目名称后的![test](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/3497549951/p110384.png)图标后，单击**Dev**或**Basic**页签，选择数据开发的**Dev**或**Basic**（非**Data\_distill**）项目。

        如果您当前访问的是**Dev**或**Basic**（非**Data\_distill**）项目，且项目为您的数据开发空间，则不需要选择项目。

    3.  在数据**开发**页面，单击**规范建模**。

        如果进入数据**开发**页面后，系统默认进入**规范建模**页签，则无需再次单击**规范建模**页签。

    4.  在**规范建模**页签，单击左侧导航栏中![cegfah](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/5687549951/p98949.png)**原子指标**图标。

4.  在**原子指标**页面，单击**原子指标**后的![](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/0887549951/p69320.png)图标，选择**新建原子指标**。

    您也可以通过以下方式，进入**新建原子指标**：

    -   单击项目名称后的![](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/0887549951/p69318.png)图标，选择**规范定义** \> **原子指标**。
    -   在页面右侧的数据开发总览区域，单击**原子指标**下的![](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/0887549951/p69322.png)图标后，选择**新建原子指标**。
    -   在**原子指标**页面左下方，单击**原子指标对象列表**。在**对象列表页**的**原子指标**页签，单击**新建原子指标**。
5.  在**新建原子指标**页面，选择**数据域**和**来源表**。

    ![](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/7587549951/p69325.png)

    |参数|描述|
    |--|--|
    |**数据域**|选择数据域。 **说明：** 划分数据域，详情请参见[划分数据域](/cn.zh-CN/使用教程/构建与优化数据仓库/业务调研/划分数据域.md)。 |
    |**来源表**|选择来源表。为保证建模标准规范，来源表仅支持维度逻辑表或事实逻辑表。|

6.  在**新建原子指标**页面，单击**新建原子指标**。

    ![ceshg](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/7587549951/p100020.png)

7.  在**新建原子指标**对话框，配置参数。

    ![test](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/7587549951/p142719.png)

    |参数|描述|
    |--|--|
    |**主要来源字段**|基于所选来源表，选择事实表或维度表中的字段。|
    |**数据时效**|基于原子指标的来源表，系统自动确定数据时效，无法修改。|
    |**英文名**|基于所选主要来源字段，英文名自动填充为字段名，您也可以修改英文名。**英文名**由字母、数字或下划线（\_）组合组成。**说明：** **英文名**不能超过64个字符。 |
    |**名称**|名称由汉字、字母、数字、下划线（\_）或短划线（-）组合组成。**说明：** **名称**不能超过64个字符。 |
    |**描述**|填写原子指标的简单描述。|
    |**数据类型**|数据类型包括**STRING**、**BIGINT**、**DOUBLE**、**DATETIME**和**DECIMAL**。|
    |**统计周期标识**|选择统计周期的字段及格式类型。|
    |**是否累加**|基于不同大小统计周期的数据，选择是否需要累加计算。例如，最近7天支付金额，是否需要基于最近1天支付金额进行累加计算。否需要基于最近1天支付金额进行累加计算。|
    |**计算逻辑**|基于来源逻辑表模型，定义所需指标的计算逻辑：    1.  编写SQL代码。

例如count\(distinct order\_id\)，其中order\_id为来源逻辑表模型中的字段。

您也可以单击**主键计算逻辑**后的**参考示例**，可以查看SQL编写示例。

    2.  单击**主键计算逻辑**后面的**规范性校验**，可以校验您编写的SQL是否符合规范。

如果**规范性校验**校验失败，您可以单击**格式化**，系统会自动为您调整SQL语句的格式。 |

8.  提交和发布原子指标。

    1.  单击**提交**。

    2.  在**提交备注**对话框，填写备注信息。

    3.  单击**确定并提交**。

    4.  发布原子指标。

        -   如果您的开发模式是Dev-Prod，则需要发布已提交的原子指标，详情请参见[t136654.md\#](/cn.zh-CN/任务发布/管理发布任务.md)。
        -   如果您的开发模式是Basic，则提交成功的原子指标，即可进入生产环境。

## 新建衍生原子指标

1.  在**原子指标**页面，单击**原子指标**后的![](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/0887549951/p69320.png)图标，选择**新建衍生原子指标**。

    您也可以通过以下方式，进入**新建衍生原子指标**：

    -   单击项目名称后的![](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/0887549951/p69318.png)图标，选择**规范定义** \> **衍生原子指标**。
    -   在页面右侧的数据开发总览区域，单击**原子指标**下的![](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/0887549951/p69322.png)图标后，选择**新建衍生原子指标**。
    -   在**原子指标**页面左下方，单击**原子指标对象列表**。在**对象列表页**的**原子指标**页签，单击**新建衍生原子指标**。
2.  在**新建衍生原子指标**对话框，配置参数。

    ![test](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/7587549951/p142776.png)

    |参数|描述|
    |--|--|
    |**数据时效**|选择数据时效。系统支持选择**天**、**小时**和**分钟**。|
    |**英文名**|**英文名**由字母、数字、下划线（\_）组合组成。**说明：** **英文名**不能超过64个字符。 |
    |**名称**|**名称**名称由汉字、字母、数字、下划线（\_）或短划线（-）组合组成。**说明：** **名称**不能超过64个字符。 |
    |**描述**|对衍生指标的简单描述。|
    |**数据类型**|数据类型包括**STRING**、**BIGINT**、**DOUBLE**、**DATETIME**和**DECIMAL**。|
    |**是否累加**|基于不同大小统计周期的数据，选择是否需要累加计算。例如，最近7天支付金额，是否需要基于最近1天支付金额进行累加计算。|
    |**计算逻辑**|基于已提交原子指标，组合设定所需指标的统计计算方式：     -   在SQL语句输入框中输入衍生指标的计算公式，其中计算公式中引用的原子指标均为已提交的原子指标。
    -   1.  单击**引用原子指标**后的![](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/7587549951/p69386.png)后，单击**数据域**及**来源表**显示框，在下拉列表中选择**数据域**及**来源表**。
2.  鼠标悬停至筛选出来的原子指标后，单击**添加**，将原子指标添加在右侧的SQL语句输入框中。
或在![](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/7587549951/p69388.png)后输入原子指标关键字进行快速搜索，单击搜索出来的原子指标后的**添加**，将原子指标添加在右侧的SQL语句输入框中。

例如，计算人均下单金额`crt_amt/usr_cnt`，其中crt\_amt为下单金额对应的已提交原子指标，usr\_cnt为用户数对应的已提交原子指标。 |

3.  提交衍生原子指标。

    1.  单击**提交**。

    2.  在**提交备注**对话框，填写备注信息。

    3.  单击**确定并提交**。

4.  发布衍生原子指标。

    -   如果您的开发模式是Dev-Prod，则需要发布已提交的衍生原子指标，详情请参见[t136654.md\#](/cn.zh-CN/任务发布/管理发布任务.md)。
    -   如果您的开发模式是Basic，则提交成功的衍生原子指标，即可进入生产环境。

