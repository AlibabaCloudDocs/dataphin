# 新建与修改事实逻辑表 {#concept_s3t_ccp_fhb .concept}

归属于某个业务过程的事实逻辑表，可以丰富具体业务过程所对应事务的详细信息。创建事实逻辑表即完成公共的事务明细数据沉淀，从而便于提取业务中事务相关的明细数据。

**说明：** 事实逻辑表是抽象提炼事务的描述性信息，无需冗余事务相关联维度的属性信息。

## 新建事实逻辑表 {#section_3wa_efw_xvl .section}

1.  进入**研发** \> **开发** \> **规范建模** \> **事实逻辑表**功能菜单。
2.  新建事实逻辑表有四个操作入口：
    -   项目名称右侧的“加号”图标。单击“加号”图标后，选择**逻辑表** \> **事实逻辑表**。

        ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/150112/155643310241910_zh-CN.png)

    -   左侧功能区右上方的**新建文件**图标，如下图所示。

        ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/150112/155643310241911_zh-CN.png)

    -   操作指引图（详情参见[使用说明](cn.zh-CN/用户指南/研发页面功能框架.md#section_sr2_j1k_dhb)）上**事实逻辑表**模块下方的“加号”图标，如下图所示。

        ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/150112/155643310341917_zh-CN.png)

    -   通过**业务过程对象列表**页面，选择某个具体的业务过程，单击**操作**列的**创建逻辑表**按钮。

        ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/150112/155643310341918_zh-CN.png)

3.  通过上述操作入口，进入新建事实逻辑表页面。
4.  首先需要填写事实逻辑表的基本信息，根据界面提示填写即可。

    基本信息包括如下几部分：

    -   所属业务板块及项目：不需要填写，系统默认。
    -   所属业务过程及对应的数据域：必填项。
    -   明细类型：必填项，可以选择**事务型**和**周期快照型**。
        -   事务型：针对业务发生过程中的事件（即业务过程）进行跟踪和度量。例如，针对订单业务发生过程中的支付订单事件进行设计。
        -   周期快照型：主要针对实体的状态进行周期性的度量，例如账户余额、商品库存等。
    -   中、英文名称及描述：
        -   英文名命名格式为fct\_业务过程\_\[自定义部分\]\_di/df，其中自定义部分为非必填。
        -   后缀di/df：针对**事务型**为di，表示天增量数据。针对**周期快照型**为df，表示天全量数据。
    -   来源主表：确定事实逻辑表的来源表，可以是物理表，也可以是逻辑表。
5.  事实逻辑表的主键定义。
    -   不设定主键，表示事实逻辑表没有主键，此时可以填写主表的筛选条件。不需要填写where关键词，直接填写筛选条件，此项为非必填项。
    -   设定主键，表示事实逻辑表有主键，此时需要填写主键信息和主键计算逻辑。

        **说明：** 

        -   事实逻辑表如果有唯一的主键（例如订单ID），后续添加的字段需要关联至事实逻辑表的主键，即字段计算逻辑里需要将被关联的字段写为系统标识关联键的关键字k，例如order\_id as k。
        -   事实逻辑表如果没有唯一的主键（例如浏览明细表），所添加字段的计算逻辑中如果有union、join，则需要保证SQL中引用了该来源表，且SQL计算逻辑加工出的记录需要在事实逻辑表的来源表记录范围内。
6.  通过上述步骤的基本信息和主键定义之后，进入事实逻辑表初始状态。

    操作区域主要包含三个：

    -   左上方区域的表信息、物理化配置、主表编辑等。
        -   物理化配置：可以参照维度逻辑表的[物理化配置](cn.zh-CN/用户指南/数据建模研发/逻辑表-维度逻辑表/物理化配置.md#)。
        -   主表编辑：可以参照维度逻辑表的[主表编辑](cn.zh-CN/用户指南/数据建模研发/逻辑表-维度逻辑表/主表编辑.md#)。
    -   主表区域中间区域的添加关联维度、添加度量、添加事实属性。
    -   主表区域右上区域的搜索字段、收起/折叠字段、主表详情和业务过程查看。
7.  调度配置。

    操作同维度逻辑表的[调度配置](cn.zh-CN/用户指南/数据建模研发/逻辑表-维度逻辑表/调度配置.md#)。

8.  提交发布。

    完成模型设计之后，在模型的右上操作区，单击**提交**。

    **说明：** 

    -   该操作区的**偷锁**功能同其他模块，不再赘述。
    -   与维度逻辑表相同，事实逻辑表编辑界面也支持列表筛选和过滤、定义公用计算逻辑、查看表计算逻辑、物理化配置、逻辑表调度配置等。
    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/150112/155643310341942_zh-CN.png)

9.  事实逻辑表发布之后，后台代码会自动化生成并进行周期调度。

    **说明：** 逻辑表发布需要生产账号，而非个人账号，并且要对所用表有权限。


## 修改事实逻辑表 {#section_stp_nsh_rey .section}

事实逻辑表的修改操作与新建相同。

