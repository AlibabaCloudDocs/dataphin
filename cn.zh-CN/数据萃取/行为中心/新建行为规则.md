---
keyword: [行为规则, 新建行为规则, 调度配置, 物理化配置]
---

# 新建行为规则

本文为您介绍如何新建及配置行为规则。

1.  登录[Dataphin控制台](https://dataphin.console.aliyun.com/workingArea)。
2.  在Dataphin控制台页面，选择工作区地域后，单击**进入Dataphin\>\>**。
3.  进入**行为规则**页面：
    1.  在Dataphin首页，单击**研发**。
    2.  在将鼠标悬停在**开发**上，单击**萃取**。
    3.  在**萃取**页面，单击左侧功能区域的**行为中心**。
    4.  在**行为中心**页签下，单击左侧导航栏的![行为规则](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/6501987951/p61553.png)图标，进入**行为规则**页面。
4.  新建行为规则的基本信息：
    1.  您可以通过以下任何一种方式，进入**新建行为规则**对话框：
        -   单击**行为规则**后的![11](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/0701987951/p61265.png)图标。
        -   单击项目名称后![项目后](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/0701987951/p63182.png)图标，选择**行为中心** \> **行为规则**。
        -   单击左侧功能区域下方的**行为规则对象列表**，进入**萃取对象列表页**。在**行为规则**页面，单击右上角的**新建行为规则**。
        -   单击右侧功能区域**行为规则**下的![新建域](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/0701987951/p63199.png)图标。
    2.  根据**新建行为规则**对话框提示，配置参数。

        ![新建行为规则详情页面](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/2501987951/p61555.png)

        |分区|参数|描述|
        |--|--|--|
        |**基本信息**|**行为域&业务线**|根据页面提示选择行为域和业务线。|
        |**动作**|选择动作。|
        |**对象**|选择对象。|
        |**来源表设置**|**来源表类型**|选择**物理表**或**逻辑表**。|
        |**来源主表**|        -   如果您**来源表类型**选择**物理表**，则选择来源主表。
        -   如果您**来源表类型**选择**逻辑表**，则需要根据页面提示，选择业务板块及来源主表。 |
        |**筛选条件**|填写筛选条件，即对应来源表的具体清洗规则，例如`ds=${bizdate}` 。 |

        **说明：** 如果您选择了开发环境的来源主表，则无法在调度配置部分进行调度依赖关系的自动解析。

    3.  单击**确定**，完成行为规则基本信息的新建。
5.  根据新建行为规则页面提示，配置参数。

    ![规则参数配置](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/2501987951/p61563.png)

    |参数|描述|
    |--|--|
    |**归一化配置**|    -   如果您有ID倒排表，则执行以下操作引入ID倒排表：

        1.  单击**ID归一化配置**。
        2.  根据**ID归一化配置**页面提示，选择ID倒排表。
        3.  单击**确定**。
**说明：** 仅支持选择当前项目内的ID倒排表。

    -   如果您没有ID倒排表，则在数据**开发**下**数据处理**模块，引入ID倒排表，同时ID倒排表任务节点输出名称为`Data_distill.倒排表名称`（即项目名.表名），详情请参见[新建SQL任务](/cn.zh-CN/数据开发/数据处理/新建MAXC任务/新建SQL任务.md)。
**说明：** 仅支持超级管理员可以开启和关闭ID归一配置。ID归一化配置开启后，结果表生成的记录包括以下两种情况：

    -   如果已选行为主体ID\_type映射成功，则结果表会按照OneID和原始ID\_type分别生成记录。
    -   如果映射失败，则结果表仅按照原始ID\_type生成记录。 |
    |**行为主体**|选择**ID\_Type**和**ID\_value**：     -   您可以选择**ID类型管理** \> **新建ID类型**新增自定义ID类型，系统内置的ID类型包括**OneID**、**Mobile**、**UserID**、**Email**和**IPAddress**。
    -   您可以单击**新增行为主体**，新增多个行为主体ID。您也可以删除已添加的行为主体ID，但当仅剩一个行为主体时不支持删除。
**说明：** 自定义ID\_type支持删除，系统内置ID\_type不支持删除和修改。 |
    |**对象**|选择**标识值**和**对象名称**。**说明：** 标识值（object\_id）和对象名称（object\_name）仅作为对象标识，不作为对象属性处理。如果您需要使用标识值或对象名称作为对象属性，请在**对象属性**中添加。 |
    |**对象属性**|对象属性是对象的事实性描述信息，如视频对象的名称、年份、导演等。选择**属性**及**属性值**：     -   您可以通过单击**对象属性管理**，进入**对象属性**页面。系统支持对已有的对象属性进行管理，同时支持新建对象属性，详情请参见[管理对象属性](/cn.zh-CN/数据萃取/行为中心/管理对象属性.md)。
    -   您也可以单击**新增对象属性**，新增多个对象属性，同时也可以删除已添加的对象属性。但当仅存在最后一个对象属性时，不支持删除。
**说明：** 请保持属性值来源字段取值稳定性，防止属性值波动对后续标签计算结果的影响。一般情况下同一对象的同一属性取值稳定且唯一，且可以从下拉列表选择已在行为元素部分定义的对象属性。 |
    |**行为属性**|非必填信息。若您选择的来源表中有表示行为发生次数的字段时，您可以单击![](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/3501987951/p76271.png)图标后，选择**属性值**。|
    |**系统**|系统自动为行为中心产出表创建系统业务日期分区字段，格式为yyyymmdd。|

6.  配置调度参数。
    1.  单击新建行为规则页面上方的**调度配置**。
    2.  根据**调度配置**页面提示，配置参数。**基本信息**区域的节点名称、节点ID、节点类型和描述不支持修改。

        |分区|参数|描述|
        |--|--|--|
        |**基本信息**|**优先级**|系统将自动生成**节点名称**、**节点ID**、**节点类型**、**负责人**和**描述**，不支持修改。您可以选择**优先级**，**优先级**包括：         -   **最低优先级**。
        -   **低优先级**。
        -   **中等优先级**。
        -   **高优先级**。
        -   **最高优先级**。 |
        |**参数配置**|单击**节点参数配置描述**，参见**节点参数配置描述**对来源表筛选条件部分的变量参数进行配置。|
        |**调度配置**|**时间属性**|时间属性包括正常调度和空跑调度：        -   正常调度：根据调度周期正常执行，通常任务默认选中该项。
        -   暂停调度：暂停任务的调度，暂停后调度到该任务会直接返回失败，不会执行。通常用于某个任务暂时不用执行，但后面还会继续使用的场景。 |
        |**调度周期**|调度周期支持选择日、周、月、小时和分钟：        -   **日**调度，即调度任务每天自动运行一次。新建周期任务时，系统默认的时间周期为每天0点运行一次。您可以根据需要，单击![](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/5197549951/p76289.png)图标，指定运行的时间点。
        -   **周**调度，即调度任务每周的特定几天，在特定时间点自动运行一次。您可以根据需要，单击![](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/5197549951/p76289.png)图标，指定运行的时间点。

如果您没有指定日期，为保证下游实例正常运行，系统会生成实例后直接设置为运行成功，而不会真正执行任何逻辑，也不会占用资源。

        -   **月**调度，即调度任务在每月的特定几天，在特定时间点自动运行一次。您可以根据需要，单击![](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/5197549951/p76289.png)图标，指定运行的时间点。

如果在没有被指定的日期时，为保证下游实例正常运行，系统会每天生成实例后直接设置为运行成功，而不会真正执行任何逻辑，也不会占用资源。

        -   **小时**调度，即每天指定的时间段内，调度任务按间隔时间数的时间间隔运行一次。或选择指定的时间点，调度系统会自动为任务生成实例并运行。您可以根据业务需求选中**时间段**或**时间点**：

            -   如果您选中了**时间段**，您可以单击**开始**或**结束**后的![](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/5197549951/p76289.png)图标，指定运行的开始和结束时间。同时您可以单击**间隔**后的![test](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/5197549951/p129374.png)图标，在下拉列表中选择间隔时间。
            -   如果您选中了**时间点**，单击下拉列表框，在下拉列表中选择时间点。
例如，每天00:00~23:59的时间段内，每隔1小时会自动调度一次，因此调度系统会自动为任务生成实例并运行。

        -   **分钟**调度，即每天指定的时间段内，调度任务按间隔时间数的时间间隔运行一次。 您可以单击**开始**或**结束**后的![](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/5197549951/p76289.png)图标，指定运行的开始和结束时间。同时您可以单击**间隔**后的![test](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/5197549951/p129374.png)图标，在下拉列表中选择间隔时间。 |
        |**依赖关系**|**上游依赖**|        -   您可以单击**依赖解析**，系统根据选择的来源表自动进行依赖解析。
        -   您也可以执行以下操作添加上游依赖：
            1.  单击**新建上游依赖**。
            2.  在**新建上游依赖**对话框中，在搜索框中输入节点名称的关键字搜索节点。
            3.  单击**确定新增**。
**说明：**

        -   若来源表为逻辑表，则系统解析的上游依赖节点不支持删除。
        -   若来源表为物理表，则系统解析的上游依赖节点支持删除。
        -   若系统自动解析失败，可单击**依赖解析**按钮重新进行解析，重新解析不会删除您新增的上游依赖节点。 |
        |**当前节点**|当该节点提交后，您可以单击![gfagaga](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/3254178061/p203946.png)图标，查看下游节点。|

    3.  单击**确定**，完成调度参数的配置。
7.  物理化配置。
    1.  单击新建行为规则页面上方的**物理化配置**。
    2.  根据**物理化配置**页面提示，选择**存储生命周期**和**选择分区字段**。

        ![物理化配置](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/3501987951/p61602.png)

    3.  单击**确定**，完成行为规则的物理化配置。
8.  保存、预览并提交行为规则。
    1.  单击页面右上方的![](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/6667528951/p61786.png)图标，保存当前行为规则的配置。
    2.  单击页面右上方的![faga](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/1667528951/p95051.png)图标，预览行为规则。
    3.  单击页面右上方的![](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/6667528951/p61789.png)图标，完成行为规则的提交。
    4.  在**提交备注**对话框，填写备注信息。
    5.  单击**确定并提交**，完成行为规则的提交。提交后的行为规则即可参与系统的调度运维。

