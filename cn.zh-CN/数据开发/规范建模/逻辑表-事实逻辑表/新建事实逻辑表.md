# 新建事实逻辑表

事实逻辑表用于描述业务过程的详细信息。本文为您介绍如何新建事实逻辑表。

-   完成数据域的创建，详情请参见[新建数据域](/cn.zh-CN/数仓规划/业务板块/新建数据域.md)。
-   完成业务过程的创建，详情请参见[新建业务过程](/cn.zh-CN/数据开发/规范建模/规范定义-业务过程/新建业务过程.md)。

1.  登录[Dataphin控制台](https://dataphin.console.aliyun.com/workingArea)。

2.  在Dataphin控制台页面，**选择工作区地域**后，单击**进入Dataphin\>\>**。

3.  进入**事实逻辑表**页面。

    1.  在Dataphin首页，单击顶部菜单栏中的**研发**。

    2.  单击项目名称后的![test](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/9887549951/p110089.png)图标，选择**Dev**或**Basic**（非**Data\_distill**）项目。

        如果您当前访问的是**Dev**或**Basic**（非**Data\_distill**）项目，且项目空间为您的数据开发空间，则无需选择项目空间。

    3.  在数据**开发**页面，单击**规范建模**。

    4.  在**规范建模**页签，单击左侧导航栏![fagag](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/4587549951/p101371.png)图标。

4.  在**事实逻辑表**页面，您可以通过以下任何一种方式，进入**新建事实逻辑表**对话框。

    -   单击项目名称后的![](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/0887549951/p69318.png)图标，选择**逻辑表** \> **事实逻辑表**。
    -   单击**事实逻辑表**后的![](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/0887549951/p69320.png)图标。
    -   在右侧的数据开发总览页面，单击**事实逻辑表**下的![](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/0887549951/p69322.png)图标。
5.  在**新建事实逻辑表**配置向导页面，完成以下操作。

    1.  在**基本信息**对话框，配置参数。

        ![fGAGA](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/5487549951/p101374.png)

        |参数|描述|
        |--|--|
        |**数据域**|选择业务过程所属的**数据域**。|
        |**业务过程**|选择业务过程。|
        |**明细类型**|系统支持明细类型选择**事物型**和**周期快照型**：         -   **事务型**用于跟踪和度量业务发生过程中的事件。例如设计订单业务发生过程中的支付订单事件。
        -   **周期快照型**用于周期性度量实体的状态。例如账户余额和商品库存等。 |
        |**英文名**|输入事实逻辑表的英文名。英文名的命名规则为`fct_业务过程英文名_自定义名称_di`或`fct_业务过程英文名_自定义名称_df`。英文名的后缀说明如下：         -   **事物型**的事实逻辑表，系统自动添加后缀为di。
        -   **周期快照型**的事实逻辑表，系统自动添加后缀为df。 |
        |**名称**|输入事实逻辑表的名称。名称由汉字、字母、数字或下划线（\_）或短划线（-）组合组成。|
        |**描述**|输入对事实逻辑表的简单描述。|
        |**来源主表**|选择事实逻辑表的**来源主表**。您可以选择物理表和逻辑表作为来源主表。|

    2.  单击**下一步**。

    3.  在**主键定义**对话框中，配置参数。

        ![fagaga](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/5487549951/p101377.png)

        -   如果**是否设定主键**选择为**否**，则可以配置筛选条件，也可以不配置筛选条件。
        -   如果**是否设定主键**选择为**是**，则配置如下参数。

            |参数|描述|
            |--|--|
            |**字段英文名**|输入主键字段的英文名称。例如item\_id。|
            |**字段名称**|输入主键字段的名称。例如商品\_id。|
            |**字段数据类型**|选择主键字段的数据类型。|
            |**字段计算逻辑**|输入主键的逻辑**字段计算逻辑**。|

            **说明：** 如果事实逻辑表有唯一的主键（例如订单ID），则添加的字段需要关联至该事实逻辑表的主键。

    4.  单击**提交**。

6.  添加度量。

    1.  在事实逻辑表的主表页面，您可以通过以下任何一种方式，进入**新建度量**对话框。

        -   单击**主表**下的**添加度量**前的![ffag](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/6487549951/p101400.png)图标。
        -   单击页面上方的**主表编辑**。在主表编辑页面，鼠标悬停至**新建字段**后，选择**度量**。

            ![vav](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/8090987951/p101412.png)

    2.  在**新建度量**对话框，配置参数。

        ![fFfF](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/8090987951/p101414.png)

        -   如果**来源表**选择为**引入字段**，则单击**选择新增字段**区域字段后的![afgag](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/6487549951/p101417.png)图标，将字段增加到**新增字段**区域，并填写**字段名称**。单击**保存并校验**，完成度量的添加。
        -   如果**来源表**选择为**SQL自定义字段**，则单击**参考示例**，参考示例填写SQL语句定义字段。完成SQL语句编写后，单击**规范性校验**，校验SQL语句的语法。校验通过后，单击**保存并校验**，完成度量添加。
7.  添加关联维度。

    1.  在事实逻辑表的主表页面，您可以通过以下任何一种方式，进入**新建关联维度**对话框。

        -   单击**主表**下的**添加关联维度**前的![ffag](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/6487549951/p101400.png)图标。
        -   单击页面上方的**主表编辑**。在主表编辑页面，鼠标悬停至**新建字段**后，选择**关联维度**。

            ![fFf](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/6487549951/p101406.png)

    2.  在**新建关联维度**对话框，配置参数。

        ![FAGAG](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/6487549951/p101407.png)

        |参数|描述|
        |--|--|
        |**关联维度信息**|选择需要关联的维度。|
        |**编辑关联逻辑**|选择已添加的度量。|
        |**编辑维度角色**|**编辑维度角色**包括**角色英文名**和**角色名称**：         -   **角色英文名**默认为维度的英文名。
        -   **角色名称**默认为维度的名称。
 您可以根据业务需求，修改**角色英文名**和**角色名称**。|
        |**默认值设定**|如果事实逻辑表的外键字段和维度表关联不上，则系统将**默认值设定**为-110。|

8.  添加事实属性。

    1.  在事实逻辑表的主表页面，您可以通过以下任何一种方式，进入**新建事实属性**对话框。

        -   单击**主表**下的**添加事实属性**前的![ffag](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/6487549951/p101400.png)图标。
        -   单击页面上方的**主表编辑**。在主表编辑页面，鼠标悬停至**新建字段**后，单击**事实属性**。
    2.  在**新建事实属性**对话框中，配置参数。

        ![fagaga](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/6487549951/p101432.png)

        -   如果**来源表**选择为**引入字段**，则单击**选择新增字段**区域字段后的![afgag](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/6487549951/p101417.png)图标，将字段增加到**新增字段**区域，并填写**字段名称**。单击**保存并校验**，完成事实属性的添加。
        -   如果**来源表**选择为**SQL自定义字段**，则单击**参考示例**，参考示例填写SQL语句定义事实属性字段。单击**规范性校验**，校验SQL语句的语法。校验通过后，单击**保存并校验**，完成事实属性的添加。
9.  提交和发布事实逻辑表。

    1.  完成参数配置后，单击**提交**。

    2.  在**提交备注**页面，填写备注信息。

    3.  单击**确定并提交**，完成事实逻辑表的提交。

    4.  发布事实逻辑表。

        -   如果您的开发模式是Dev-Prod模式，则需要发布事实逻辑表，详情请参见[t136654.md\#](/cn.zh-CN/任务发布/管理发布任务.md)。
        -   如果您的开发模式是Basic模式，则无需发布事实逻辑表。

