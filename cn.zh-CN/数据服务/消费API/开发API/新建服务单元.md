---
keyword: 新建服务单元
---

# 新建服务单元

在您开始新建API前，需要对数据表进行统一的元数据配置，即新建服务单元。Dataphin支持通过单物理表和多物理表的方式新建服务单元。本文为您介绍如何新建服务单元。

-   完成服务单元分组的创建，请参见[新建服务单元分组](/cn.zh-CN/数据服务/消费API/开发API/新建分组.md)。
-   如果数据源为Hbase、ElasticSearch、MongoDB，完成元数据的创建，请参见[新建元数据](/cn.zh-CN/数据服务/消费API/开发API/新建元数据.md)。

## 背景信息

-   多物理表服务单元用于基于多张同源或异构物理表生成服务单元。
-   服务单元支持多人协助开发，服务单元列表中展示所有的服务单元。
-   一个服务单元可以对接多个API，即服务单元与API的关系是1:N。
-   服务单元状态说明。

    |状态|描述|
    |--|--|
    |草稿|服务单元保存后，即可成为草稿状态。|
    |开发环境服务中|服务单元提交后，即可进入开发环境中，并且处于服务中的状态。|
    |生产环境服务中|服务单元发布后，即可进入生产环境中，并且处于服务中的状态。|

-   服务单元支持Basic和Dev-Prod模式。

    |模式|使用场景|
    |--|----|
    |Basic|数据生产过程稳定且便捷。数据的开发、提交和发布均调用生产环境的数据。|
    |Dev-Prod|保障数据安全的同时，满足应用系统的开发需求，提供基于开发数据库的API调用链路。数据的开发和提交均调用开发环境的数据，数据的发布调用生产环境的数据。|


## 使用限制

系统支持超级管理员和开发者角色的成员新建服务单元，更多关于服务单元的操作限制，请参见[数据服务权限列表](/cn.zh-CN/权限管理/数据服务权限列表.md)。

## 新建单物理表服务单元

1.  [进入个人工作台](/cn.zh-CN/数据服务/进入数据服务.md)。

2.  在**个人工作台**页面，单击左侧导航栏的**服务单元**。

3.  在**服务单元**页面，单击**服务单元**页面右上角的**新建服务单元**。

4.  在新建服务单元配置向导页面，完成以下操作。

    1.  服务单元类型选择为**单物理表服务单元**后，单击**下一步**。

    2.  完成**服务单元基础信息**配置后，单击**下一步**。

        ![test](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/3491721061/p169578.png)

        |参数|描述|
        |--|--|
        |服务单元名称|填写服务单元名称。|
        |服务单元分组|选择服务单元的分组。|
        |模式|选择开发服务单元的模式。|
        |物理数据表|选择数据源类型、数据源和数据表。您也可以单击**新增数据源**，新建数据源，详细内容请参见[数据源](/cn.zh-CN/数仓规划/数据源/新建离线数据源/新建MaxCompute数据源.md)。 |
        |服务单元描述|填写对服务单元简单的描述。|

        如果系统中服务单元与您选择信息相似，则系统会自动为您展示相似服务单元的名称，同时提供编辑和查看的操作入口。您可以编辑已有的服务单元或单击**继续新建**。

    3.  配置服务单元字段。

        在**配置服务单元字段**页面，您可以修改服务单元字段类型和服务单元字段名称。

        完成服务单元字段的配置后，单击页面下方的**数据预览**，查看数据。同时您还可以修改**返回条数**后，单击**刷新数据预览**后，查看更新后的数据。

5.  单击**提交**，完成服务单元创建。

6.  在服务单元列表页面，鼠标悬停至![gaga](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/9811987951/p85357.png)图标后，单击**发布**，发布服务单元至生产环境，即可基于服务单元创建API。

    **说明：** 系统仅支持发布已提交的服务单元。

    ![test](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/3491721061/p169796.png)

    对已发布的服务单元，可以执行如下操作。

    |操作|描述|
    |--|--|
    |编辑|在**服务单元**页面，单击**操作**列下的![fagfa](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/1811987951/p85231.png)图标，编辑服务单元。|
    |删除|在**服务单元**页面，单击**操作**列下的![aga](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/0911987951/p85232.png)图标，删除服务单元。 **说明：** 仅限服务单元负责人及超级管理员执行删除服务单元的操作。 |
    |查看|在**服务单元**页面，单击**操作**列下的![trst](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/3491721061/p169785.png)图标，查看开发环境和生产环境中服务单元的详情。 **说明：** 系统仅支持查看生产环境或开发环境在服务中状态的服务单元。 |


## 新建多物理表服务单元

1.  [进入个人工作台](/cn.zh-CN/数据服务/进入数据服务.md)。

2.  在**个人工作台**页面，单击左侧导航栏的**服务单元**。

3.  单击**服务单元**页面右上角的**新建服务单元**。

4.  在新建服务单元配置向导页面，完成以下操作。

    1.  服务单元类型选择为**多物理表服务单元**后，单击**下一步**。

    2.  完成**服务单元基础信息**配置后，单击**下一步**。

        ![test](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/1214621061/p169634.png)

        |参数|描述|
        |--|--|
        |服务单元名称|填写服务单元名称。|
        |服务单元分组|选择服务单元的分组。|
        |模式|选择开发服务单元的模式。|
        |服务单元描述|填写对服务单元简单的描述。|
        |挂载物理表列表|添加挂载的物理表：         1.  单击**添加物理表**。
        2.  在**新增物理表**对话框，选择数据源类型、数据源和数据表。

您也可以单击**新增数据源**，新建数据源，详细内容请参见[数据源](/cn.zh-CN/数仓规划/数据源/新建离线数据源/新建MaxCompute数据源.md)。

        3.  选取字段。

在**未选取字段**区域选中字段后，单击![tst](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/1214621061/p169607.png)图标，同步至**已选取字段**区域。

        4.  单击**确定**。 |

        如果系统中服务单元与您选择的信息接近，则系统会自动为您展示相似服务单元的名称，同时提供编辑和查看的操作入口。您可以编辑已有的服务单元或单击**继续新建**。

        系统默认将添加的第一个物理表设为主表，您可以单击**主表**列下的![gaga](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/1811987951/p85360.png)图标，选择主表。同时，您还可以编辑物理表、编辑已选字段和删除物理表。

    3.  根据**配置服务单元字段**页面提示及您的业务场景需求，配置参数。

        ![tst](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/2214621061/p169813.png)

        |区域|参数|描述|
        |--|--|--|
        |配置服务单元关联字段|服务单元字段|填写服务单元字段的名称。|
        |`物理表名称.关联字段`|选择关联字段。多张物理表通过联合关联字段进行关联。|
        |服务单元关联字段类型|选择服务单元关联字段的类型。|
        |操作|单击**操作**列下的![aga](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/0911987951/p85232.png)图标，删除已配置服务单元关联字段。 **说明：** 第一行配置服务单元关联字段不支持删除。 |
        |配置服务单元字段|服务单元字段类型|根据物理表映射选择服务单元字段的类型。|
        |服务单元字段|根据物理表映射选择服务单元字段。|

        完成服务单元字段的配置后，单击页面下方的**数据预览**，查看数据。同时您也可以修改**返回条数**后，单击**刷新数据预览**后，查看数据。

    4.  单击**提交**，完成服务单元创建。

5.  在**服务单元**页面，鼠标悬停至![gaga](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/9811987951/p85357.png)图标，单击**发布**，发布服务单元至生产环境，即可基于服务单元创建API。

    对已发布的服务单元，可以执行如下操作。

    |操作|描述|
    |--|--|
    |编辑|单击**操作**列下的![fagfa](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/1811987951/p85231.png)图标，编辑服务单元。|
    |删除|单击**操作**列下的![aga](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/0911987951/p85232.png)图标，删除服务单元。 **说明：**

    -   仅未发布的服务单元支持删除操作。
    -   仅限服务单元负责人及超级管理员支持删除服务单元的操作。 |
    |查看|单击**操作**列下的![trst](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/3491721061/p169785.png)图标，查看开发环境和生产环境中服务单元的详情。 **说明：** 系统仅支持查看生产环境或开发环境在服务中状态的服务单元。 |


## 后续操作

服务单元发布至生产环境后，即可基于服务单元新建API。关于新建API，请参见[新建API](/cn.zh-CN/数据服务/消费API/开发API/新建API.md)。

