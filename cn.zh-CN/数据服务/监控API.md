---
keyword: [监控运维, 监控API]
---

# 监控API

为了保障应用能够正常调用API，同时能够保护系统，数据服务支持监控当天API的运行情况，包括查看API运行详情、配置API限流和API告警。本文为您介绍如何查看API运行详情、配置API限流、配置API告警。

## 查看API运行详情

1.  [进入个人工作台](/cn.zh-CN/数据服务/进入数据服务.md)。

2.  在**个人工作台**页面，单击左侧导航栏**信息统计及监控**下的**我生产的**。

3.  在**API当天运行情况**页面，单击某个API**操作**列下的**详情**，可以查看最近1小时内API的运行情况，包括调用次数、错误率、offline百分比、平均响应时间和授权应用数。


## 配置API限流

**说明：** 仅超级管理员及API的开发者支持配置API限流。

1.  [进入个人工作台](/cn.zh-CN/数据服务/进入数据服务.md)。

2.  在**个人工作台**页面，单击左侧导航栏**信息统计及监控**下的**我生产的**。

3.  在**API当天运行情况**页面，单击某个API**操作**列下的**限流**。

4.  在**API限流配置**对话框，配置参数。

    ![gaga](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/4911987951/p84689.png)

    |参数|描述|
    |--|--|
    |限流状态|选择限流状态。|
    |单位时间|选择限流的单位，系统提供的**单位时间**包括：     -   **hour**
    -   **sec**
    -   **min**
    -   **day** |
    |API流量限制|填写API限流的数据。例如，企业所购买的总流量为每秒查询率是500，如果**单位时间**选择**sec**，则**API流量限制**填写的数据应该小于等于500。|
    |APP流量限制|填写API的下游APP的流量控制。填写**APP流量限制**的规则：     -   **APP流量限制**对API下的所有APP生效。
    -   **APP流量限制**必须小于**API流量限制**。
    -   **API流量限制**的优先级大于**APP流量限制**。例如，**API流量限制**为每秒查询率是1000，APP1的流量限制为每秒查询率是500，APP2的流量限制为每秒查询率是500，APP3的流量限制为每秒查询率是500，各APP流量限制的总和大于API的流量限制，但流量限制的上线为API流量限制。
    -   **APP流量限制**大于**API流量限制**时，系统会给出报错信息。 |
    |添加APP|单击**添加APP**，根据**API限流配置**页面提示选择**应用**、填写**限流次数**。同时您也可以单击已添加特殊APP的**操作**列下的![aga](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/5911987951/p84729.png)图标，删除特殊APP的流量限制。![faga](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/5911987951/p84715.png)

填写**限流次数**的规则：     -   特殊APP的**限流次数**必须小于等于**API流量限制**。
    -   特殊APP的**限流次数**优先级高于**APP流量限制**，例如，**APP流量限制**配置了每秒查询率100，某个特殊APP的**限流次数**配置了200或0。
    -   特殊APP的**限流次数**大于**API流量限制**时，系统会给出报错信息。 |

5.  单击**确定**，完成API限流的配置。如果一个时间窗口内的请求达到限制速率，则系统通过排队、等待或降级等方式，来保护系统。


## 配置API告警

1.  [进入个人工作台](/cn.zh-CN/数据服务/进入数据服务.md)。

2.  在**API当天运行情况**页面，单击某个API**操作**列下的**告警**。

3.  在**API告警**页面，单击**添加规则**。

4.  根据页面提示，配置参数。

    ![dfafa](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/5911987951/p84763.png)

    |参数|描述|
    |--|--|
    |监控指标|选择告警规则的API监控指标。**监控指标**包括：     -   **调用次数**：单位时间内，调用API的总次数。
    -   **平均响应时长**：单位时间内，API调用总时长/API调用总次数。
    -   **错误率**：单位时间内，API调用错误总次数/API调用总次数。
    -   **offline百分比**：单位时间内，API调用错误返回offline错误总次数/API调用总次数。 |
    |单位时间|选择API调用的单位时间。**单位时间**包括**1min** 、**5min**、**10min**、**30min**、**60min**。|
    |操作符|选择监控指标与**触发阈值**的比较的操作符。**操作符**包括**<=**， **<**，**\>**，**\>=**，**=**，**!=**。|
    |触发阈值|填写告警规则的触发阈值。|
    |通知方式|选择告警信息通知给通知人的方式。**通知方式**包括：     -   **邮件**
    -   **电话**
    -   **短信**
    -   **钉钉** |
    |通知人|选择告警信息的接收人。|
    |静默期|在短时间内多次告警，可以设置一个静默期，在发送告警信息后的静默期期间，系统不再重复发送相同API告警规则的信息。|

5.  单击**确定**。应用调用API运行过程中，如果触发了监控告警规则，系统会给您发送告警消息，便于您及时发现并处理异常。

    您也可以查看API的基本信息和已添加的告警规则。系统支持对已添加的告警规则执行如下操作：

    -   单击**操作**列下的![gaga](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/5911987951/p84778.png)图标，编辑告警规则。
    -   单击**操作**列下的![gaga](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/5911987951/p84780.png)图标，删除告警规则。

